# Практическая работа. Создание REST API с помощью контроллеров в .NET

## Тема
Создание RESTful Web API с использованием ASP.NET Core контроллеров

## Цель
Освоить принципы создания REST API в .NET, изучить работу контроллеров, маршрутизацию, HTTP методы и форматирование ответов.

## Теоретическая часть

### Основные понятия:
- **REST (Representational State Transfer)** - архитектурный стиль для создания веб-сервисов
- **API Controller** - класс, обрабатывающий HTTP запросы
- **Маршрутизация** - сопоставление URL с действиями контроллера
- **HTTP методы**: GET, POST, PUT, DELETE, PATCH
- **DTO (Data Transfer Object)** - объекты для передачи данных

### Структура REST API:
```
GET /api/products - получить все продукты
GET /api/products/{id} - получить продукт по ID
POST /api/products - создать новый продукт
PUT /api/products/{id} - обновить продукт
DELETE /api/products/{id} - удалить продукт
```

## Практический пример

### Модель данных
```csharp
public class Product
{
    public int Id { get; set; }
    public string Name { get; set; }
    public decimal Price { get; set; }
    public string Category { get; set; }
    public DateTime CreatedDate { get; set; }
}
```

### Контроллер
```csharp
[ApiController]
[Route("api/[controller]")]
public class ProductsController : ControllerBase
{
    private static List<Product> _products = new()
    {
        new Product { Id = 1, Name = "Laptop", Price = 999.99m, Category = "Electronics", CreatedDate = DateTime.Now },
        new Product { Id = 2, Name = "Book", Price = 19.99m, Category = "Education", CreatedDate = DateTime.Now }
    };

    [HttpGet]
    public ActionResult<IEnumerable<Product>> GetProducts()
    {
        return Ok(_products);
    }

    [HttpGet("{id}")]
    public ActionResult<Product> GetProduct(int id)
    {
        var product = _products.FirstOrDefault(p => p.Id == id);
        if (product == null)
            return NotFound();
        
        return Ok(product);
    }

    [HttpPost]
    public ActionResult<Product> CreateProduct(Product product)
    {
        product.Id = _products.Max(p => p.Id) + 1;
        product.CreatedDate = DateTime.Now;
        _products.Add(product);
        
        return CreatedAtAction(nameof(GetProduct), new { id = product.Id }, product);
    }

    [HttpPut("{id}")]
    public IActionResult UpdateProduct(int id, Product product)
    {
        var existingProduct = _products.FirstOrDefault(p => p.Id == id);
        if (existingProduct == null)
            return NotFound();

        existingProduct.Name = product.Name;
        existingProduct.Price = product.Price;
        existingProduct.Category = product.Category;

        return NoContent();
    }

    [HttpDelete("{id}")]
    public IActionResult DeleteProduct(int id)
    {
        var product = _products.FirstOrDefault(p => p.Id == id);
        if (product == null)
            return NotFound();

        _products.Remove(product);
        return NoContent();
    }
}
```

## Ход работы

1. Создать новый проект ASP.NET Core Web API
2. Добавить модели данных согласно варианту
3. Реализовать контроллер с CRUD операциями
4. Протестировать API с помощью Swagger/Postman
5. Сделать скриншоты результатов
6. Оформить README.md
7. Загрузить в Gogs

## Варианты заданий

### Вариант 1: "Управление книгами"
Создать API для управления библиотекой книг. Поля: Id, Title, Author, ISBN, PublicationYear, Genre.

### Вариант 2: "Студенты"
API для управления студентами. Поля: Id, FirstName, LastName, Email, Phone, EnrollmentDate.

### Вариант 3: "Задачи"
API для управления задачами (Todo). Поля: Id, Title, Description, IsCompleted, DueDate, Priority.

### Вариант 4: "Сотрудники"
API для управления сотрудниками компании. Поля: Id, Name, Position, Department, Salary, HireDate.

### Вариант 5: "Заказы"
API для управления заказами. Поля: Id, CustomerName, OrderDate, TotalAmount, Status.

### Вариант 6: "Пользователи"
API для управления пользователями. Поля: Id, Username, Email, RegistrationDate, IsActive.

### Вариант 7: "Категории товаров"
API для управления категориями товаров. Поля: Id, Name, Description, CreatedDate.

### Вариант 8: "Отзывы"
API для управления отзывами о продуктах. Поля: Id, ProductId, Author, Rating, Comment, CreatedDate.

### Вариант 9: "Блог посты"
API для управления постами блога. Поля: Id, Title, Content, Author, PublishedDate, IsPublished.

### Вариант 10: "Курсы"
API для управления курсами. Поля: Id, CourseName, Instructor, Duration, Price, StartDate.

### Вариант 11: "Транзакции"
API для управления финансовыми транзакциями. Поля: Id, Description, Amount, TransactionDate, Type (Income/Expense).

### Вариант 12: "Проекты"
API для управления проектами. Поля: Id, ProjectName, Description, StartDate, EndDate, Status.

### Вариант 13: "Поставщики"
API для управления поставщиками. Поля: Id, CompanyName, ContactPerson, Phone, Email, Address.

### Вариант 14: "События календаря"
API для управления событиями. Поля: Id, EventName, Description, EventDate, Location, IsCompleted.

### Вариант 15: "Инвентарь"
API для управления инвентарем. Поля: Id, ItemName, Quantity, Location, LastRestocked, MinimumStock.

## Критерии оценки

### 5 (Отлично)
- Все методы API реализованы корректно
- Правильная обработка ошибок и статус коды
- Чистый и хорошо структурированный код
- Полностью работоспособное API
- Качественное оформление README.md

### 4 (Хорошо)
- Реализованы основные CRUD операции
- Незначительные ошибки в коде
- Не все статус коды обработаны правильно
- README.md оформлен с небольшими недочетами

### 3 (Удовлетворительно)
- Реализованы только базовые методы (GET, POST)
- Наличие существенных ошибок
- Неполное соответствие REST принципам
- README.md оформлен не полностью

### 2 (Неудовлетворительно)
- API не работает или работает некорректно
- Критические ошибки в реализации
- Отсутствует README.md или оформлен небрежно

## Контрольные вопросы

1. Что такое REST и каковы его основные принципы?
2. Какие HTTP методы используются в REST API и для чего?
3. Как работает маршрутизация в ASP.NET Core контроллерах?
4. Какие атрибуты используются для определения методов контроллера?
5. Как обрабатывать ошибки в Web API?
6. Что такое DTO и зачем они используются?
7. Какие статус коды HTTP вы знаете и когда их использовать?
8. Как работает внедрение зависимостей в ASP.NET Core?
9. Что такое модель связывания (model binding)?
10. Как обеспечить валидацию данных в API?

---

# Пример README.md для варианта 1

```markdown
# Практическая работа: Создание REST API с помощью контроллеров

**Номер практической работы:** 1  
**Вариант:** 1 - "Управление книгами"  
**Студент:** Иванов И.И.  
**Группа:** ИСП-202

## Задание
Создать REST API для управления библиотекой книг с использованием ASP.NET Core контроллеров. 
Реализовать CRUD операции для сущности Book.

## Модель данных

```csharp
public class Book
{
    public int Id { get; set; }
    public string Title { get; set; }
    public string Author { get; set; }
    public string ISBN { get; set; }
    public int PublicationYear { get; set; }
    public string Genre { get; set; }
}
```

## Реализованные endpoints

- `GET /api/books` - получить все книги
- `GET /api/books/{id}` - получить книгу по ID
- `POST /api/books` - создать новую книгу
- `PUT /api/books/{id}` - обновить книгу
- `DELETE /api/books/{id}` - удалить книгу

## Скриншоты работы программы

### Получение всех книг
![Get All Books](images/get-all-books.png)

### Создание новой книги
![Create Book](images/create-book.png)

### Получение книги по ID
![Get Book by ID](images/get-book-by-id.png)

## Запуск проекта

```bash
dotnet run
```

API будет доступно по адресу: `https://localhost:7000/api/books`
Swagger UI: `https://localhost:7000/swagger`
```

## Структура репозитория в Gogs

```
PracticalWork-RESTAPI/
├── BookAPI/
│   ├── Controllers/
│   │   └── BooksController.cs
│   ├── Models/
│   │   └── Book.cs
│   ├── Program.cs
│   └── BookAPI.csproj
├── images/
│   ├── get-all-books.png
│   ├── create-book.png
│   └── get-book-by-id.png
└── README.md
```