# –õ–µ–∫—Ü–∏—è. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ .NET —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Testcontainers –∏ PostgreSQL

## –¢–µ–º–∞
"–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: Testcontainers –∏ PostgreSQL –≤ .NET"

## –ü–ª–∞–Ω
1. –í–≤–µ–¥–µ–Ω–∏–µ –≤ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
2. –ü—Ä–æ–±–ª–µ–º—ã —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
3. –û–±–∑–æ—Ä Testcontainers
4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Testcontainers –≤ .NET –ø—Ä–æ–µ–∫—Ç–µ
5. –†–∞–±–æ—Ç–∞ —Å PostgreSQL –≤ —Ç–µ—Å—Ç–∞—Ö
6. –ü–∞—Ç—Ç–µ—Ä–Ω—ã –∏ best practices
7. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CI/CD
8. –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

## –†–µ–∑—é–º–µ
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ —Å–∏—Å—Ç–µ–º—ã. Testcontainers –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–µ, –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, —É—Å—Ç—Ä–∞–Ω—è—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤ shared test environments. –í —Å–æ—á–µ—Ç–∞–Ω–∏–∏ —Å PostgreSQL —ç—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–∞–¥–µ–∂–Ω—ã–µ, –ø–æ–≤—Ç–æ—Ä—è–µ–º—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã, –±–ª–∏–∑–∫–∏–µ –∫ production-—Å—Ä–µ–¥–µ.

---

## –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –ø—É–Ω–∫—Ç–∞ –ø–ª–∞–Ω–∞

### 1. –í–≤–µ–¥–µ–Ω–∏–µ –≤ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ß—Ç–æ —Ç–∞–∫–æ–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ?**
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –º–æ–¥—É–ª—è–º–∏ –∏–ª–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç unit-—Ç–µ—Å—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –∏–∑–æ–ª–∏—Ä—É—é—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç –∏—Ö —Å–æ–≤–º–µ—Å—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É.

**–£—Ä–æ–≤–Ω–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
- **Unit —Ç–µ—Å—Ç—ã**: –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã/–∫–ª–∞—Å—Å—ã
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã**: –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **–°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç–µ—Å—Ç—ã**: –ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- **E2E —Ç–µ—Å—Ç—ã**: —Å—Ü–µ–Ω–∞—Ä–∏–∏ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
- –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ë–æ–ª–µ–µ –≤—ã—Å–æ–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Å–∏—Å—Ç–µ–º–µ
- –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–ü—Ä–∏–º–µ—Ä —Å—Ü–µ–Ω–∞—Ä–∏—è –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
```csharp
public class OrderProcessingService
{
    private readonly IOrderRepository _orderRepository;
    private readonly IPaymentService _paymentService;
    private readonly IShippingService _shippingService;
    private readonly IEmailService _emailService;

    public async Task ProcessOrderAsync(Order order)
    {
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∑–∞–∫–∞–∑ –≤ –ë–î
        await _orderRepository.SaveAsync(order);
        
        // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–ª–∞—Ç–µ–∂
        var paymentResult = await _paymentService.ProcessPaymentAsync(order);
        
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫—É
        await _shippingService.ScheduleDeliveryAsync(order);
        
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
        await _emailService.SendConfirmationAsync(order);
    }
}
```

### 2. –ü—Ä–æ–±–ª–µ–º—ã —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**

1. **Shared test environment**
```csharp
// –ü–†–û–ë–õ–ï–ú–ê: –æ–±—â–∞—è —Ç–µ—Å—Ç–æ–≤–∞—è –ë–î
public class TraditionalDatabaseTest
{
    private const string ConnectionString = 
        "Host=test-db-server;Database=shared_test_db;Username=test;Password=test";
    
    [Fact]
    public async Task TraditionalTest_DataRaceCondition()
    {
        // –î—Ä—É–≥–æ–π —Ç–µ—Å—Ç –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ!
        var repository = new UserRepository(ConnectionString);
        
        await repository.AddUserAsync(new User { Name = "Test User" });
        var users = await repository.GetAllUsersAsync();
        
        Assert.Contains(users, u => u.Name == "Test User");
    }
}
```

2. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤**
3. **–ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π**
4. **–ú–µ–¥–ª–µ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ**
5. **–ù–µ–Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤**

**–†–µ—à–µ–Ω–∏–µ - Testcontainers:**
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ
- –ò–¥–µ–Ω—Ç–∏—á–Ω–∞—è production —Å—Ä–µ–¥–µ
- –ë—ã—Å—Ç—Ä–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

### 3. –û–±–∑–æ—Ä Testcontainers

**–ß—Ç–æ —Ç–∞–∫–æ–µ Testcontainers?**
Testcontainers - —ç—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–µ, –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö, message brokers, web-—Å–µ—Ä–≤–µ—Ä–æ–≤ –∏ –¥—Ä—É–≥–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã.

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Testcontainers:**
```
Test Project ‚Üí Testcontainers Library ‚Üí Docker Daemon ‚Üí Container (PostgreSQL)
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- üöÄ –ë—ã—Å—Ç—Ä–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
- üßπ –ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞
- üîÑ –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å
- üê≥ Production-like —Å—Ä–µ–¥–∞

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- PostgreSQL, MySQL, SQL Server, MongoDB
- Redis, RabbitMQ
- Elasticsearch
- Web-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ –æ–±—Ä–∞–∑—ã

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Testcontainers –≤ .NET –ø—Ä–æ–µ–∫—Ç–µ

**–®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤**
```xml
<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFramework>net8.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
    <IsPackable>false</IsPackable>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="Microsoft.NET.Test.Sdk" Version="17.8.0" />
    <PackageReference Include="xunit" Version="2.6.6" />
    <PackageReference Include="xunit.runner.visualstudio" Version="2.5.6" />
    <PackageReference Include="Testcontainers" Version="3.6.0" />
    <PackageReference Include="Testcontainers.PostgreSql" Version="3.6.0" />
    <PackageReference Include="Dapper" Version="2.1.24" />
    <PackageReference Include="Npgsql" Version="7.0.6" />
    <PackageReference Include="Microsoft.EntityFrameworkCore" Version="8.0.0" />
    <PackageReference Include="Microsoft.EntityFrameworkCore.Design" Version="8.0.0">
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
      <PrivateAssets>all</PrivateAssets>
    </PackageReference>
    <PackageReference Include="Microsoft.Extensions.DependencyInjection" Version="8.0.0" />
  </ItemGroup>

</Project>
```

**–®–∞–≥ 2: –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**
```csharp
using Testcontainers.PostgreSql;

public class DatabaseFixture : IAsyncLifetime
{
    private readonly PostgreSqlContainer _postgresContainer;
    
    public string ConnectionString => _postgresContainer.GetConnectionString();
    
    public DatabaseFixture()
    {
        _postgresContainer = new PostgreSqlBuilder()
            .WithImage("postgres:15-alpine")
            .WithDatabase("test_db")
            .WithUsername("postgres")
            .WithPassword("postgres")
            .WithCleanUp(true)
            .Build();
    }
    
    public async Task InitializeAsync()
    {
        await _postgresContainer.StartAsync();
        await InitializeDatabaseSchema();
    }
    
    public async Task DisposeAsync()
    {
        await _postgresContainer.DisposeAsync();
    }
    
    private async Task InitializeDatabaseSchema()
    {
        using var connection = new NpgsqlConnection(ConnectionString);
        await connection.OpenAsync();
        
        // –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
        var createTableSql = """
            CREATE TABLE IF NOT EXISTS users (
                id SERIAL PRIMARY KEY,
                name VARCHAR(100) NOT NULL,
                email VARCHAR(255) UNIQUE NOT NULL,
                created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
            );
            
            CREATE TABLE IF NOT EXISTS orders (
                id SERIAL PRIMARY KEY,
                user_id INTEGER REFERENCES users(id),
                total_amount DECIMAL(10,2) NOT NULL,
                status VARCHAR(50) NOT NULL,
                created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
            );
            """;
            
        await connection.ExecuteAsync(createTableSql);
    }
}
```

### 5. –†–∞–±–æ—Ç–∞ —Å PostgreSQL –≤ —Ç–µ—Å—Ç–∞—Ö

**–ü—Ä–∏–º–µ—Ä Entity Framework Core –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:**
```csharp
public class ApplicationDbContext : DbContext
{
    public ApplicationDbContext(DbContextOptions<ApplicationDbContext> options) 
        : base(options) { }
    
    public DbSet<User> Users => Set<User>();
    public DbSet<Order> Orders => Set<Order>();
    
    protected override void OnModelCreating(ModelBuilder modelBuilder)
    {
        modelBuilder.Entity<User>(entity =>
        {
            entity.HasKey(e => e.Id);
            entity.Property(e => e.Name).IsRequired().HasMaxLength(100);
            entity.Property(e => e.Email).IsRequired().HasMaxLength(255);
            entity.HasIndex(e => e.Email).IsUnique();
        });
        
        modelBuilder.Entity<Order>(entity =>
        {
            entity.HasKey(e => e.Id);
            entity.Property(e => e.TotalAmount).HasPrecision(10, 2);
            entity.Property(e => e.Status).IsRequired().HasMaxLength(50);
            
            entity.HasOne(e => e.User)
                  .WithMany(u => u.Orders)
                  .HasForeignKey(e => e.UserId);
        });
    }
}

public class User
{
    public int Id { get; set; }
    public string Name { get; set; } = string.Empty;
    public string Email { get; set; } = string.Empty;
    public DateTime CreatedAt { get; set; } = DateTime.UtcNow;
    
    public ICollection<Order> Orders { get; set; } = new List<Order>();
}

public class Order
{
    public int Id { get; set; }
    public int UserId { get; set; }
    public decimal TotalAmount { get; set; }
    public string Status { get; set; } = "Pending";
    public DateTime CreatedAt { get; set; } = DateTime.UtcNow;
    
    public User? User { get; set; }
}
```

**–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è —Ç–µ—Å—Ç–æ–≤ —Å –ë–î:**
```csharp
public class DatabaseTest : IAsyncLifetime
{
    protected readonly PostgreSqlContainer _postgresContainer;
    protected ApplicationDbContext DbContext { get; private set; } = null!;
    protected string ConnectionString => _postgresContainer.GetConnectionString();
    
    public DatabaseTest()
    {
        _postgresContainer = new PostgreSqlBuilder()
            .WithImage("postgres:15-alpine")
            .WithDatabase("test_db")
            .WithUsername("postgres")
            .WithPassword("postgres")
            .WithCleanUp(true)
            .WithAutoRemove(true)
            .Build();
    }
    
    public virtual async Task InitializeAsync()
    {
        await _postgresContainer.StartAsync();
        await InitializeDbContext();
        await SeedTestDataAsync();
    }
    
    public virtual async Task DisposeAsync()
    {
        if (DbContext != null)
            await DbContext.DisposeAsync();
            
        await _postgresContainer.DisposeAsync();
    }
    
    protected virtual async Task InitializeDbContext()
    {
        var options = new DbContextOptionsBuilder<ApplicationDbContext>()
            .UseNpgsql(ConnectionString)
            .Options;
            
        DbContext = new ApplicationDbContext(options);
        await DbContext.Database.MigrateAsync();
    }
    
    protected virtual async Task SeedTestDataAsync()
    {
        // –ë–∞–∑–æ–≤–∞—è seeding –ª–æ–≥–∏–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–µ—Å—Ç–∞—Ö
        await Task.CompletedTask;
    }
    
    protected async Task ClearDatabaseAsync()
    {
        // –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏
        DbContext.Users.RemoveRange(DbContext.Users);
        DbContext.Orders.RemoveRange(DbContext.Orders);
        await DbContext.SaveChangesAsync();
    }
}
```

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤:**

**–ü—Ä–∏–º–µ—Ä 1: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**
```csharp
public class UserRepositoryTests : DatabaseTest
{
    private UserRepository _repository = null!;
    
    protected override async Task InitializeDbContext()
    {
        await base.InitializeDbContext();
        _repository = new UserRepository(DbContext);
    }
    
    protected override async Task SeedTestDataAsync()
    {
        // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
        var users = new[]
        {
            new User { Name = "John Doe", Email = "john@example.com" },
            new User { Name = "Jane Smith", Email = "jane@example.com" }
        };
        
        await DbContext.Users.AddRangeAsync(users);
        await DbContext.SaveChangesAsync();
    }
    
    [Fact]
    public async Task GetById_ExistingUser_ReturnsUser()
    {
        // Arrange
        var existingUser = await DbContext.Users.FirstAsync();
        
        // Act
        var result = await _repository.GetByIdAsync(existingUser.Id);
        
        // Assert
        Assert.NotNull(result);
        Assert.Equal(existingUser.Id, result.Id);
        Assert.Equal(existingUser.Name, result.Name);
    }
    
    [Fact]
    public async Task AddUser_ValidUser_UserIsAdded()
    {
        // Arrange
        var newUser = new User { Name = "New User", Email = "new@example.com" };
        
        // Act
        await _repository.AddAsync(newUser);
        await DbContext.SaveChangesAsync();
        
        // Assert
        var userInDb = await DbContext.Users
            .FirstOrDefaultAsync(u => u.Email == "new@example.com");
            
        Assert.NotNull(userInDb);
        Assert.Equal("New User", userInDb.Name);
    }
    
    [Fact]
    public async Task GetUserWithOrders_UserExists_ReturnsUserWithOrders()
    {
        // Arrange
        var user = new User { Name = "User With Orders", Email = "orders@example.com" };
        user.Orders.Add(new Order { TotalAmount = 100.50m, Status = "Completed" });
        user.Orders.Add(new Order { TotalAmount = 50.25m, Status = "Pending" });
        
        await DbContext.Users.AddAsync(user);
        await DbContext.SaveChangesAsync();
        
        // Act
        var result = await _repository.GetUserWithOrdersAsync(user.Id);
        
        // Assert
        Assert.NotNull(result);
        Assert.Equal(2, result.Orders.Count);
        Assert.Contains(result.Orders, o => o.TotalAmount == 100.50m);
        Assert.Contains(result.Orders, o => o.Status == "Pending");
    }
}

public class UserRepository
{
    private readonly ApplicationDbContext _context;
    
    public UserRepository(ApplicationDbContext context)
    {
        _context = context;
    }
    
    public async Task<User?> GetByIdAsync(int id)
    {
        return await _context.Users.FindAsync(id);
    }
    
    public async Task AddAsync(User user)
    {
        await _context.Users.AddAsync(user);
    }
    
    public async Task<User?> GetUserWithOrdersAsync(int userId)
    {
        return await _context.Users
            .Include(u => u.Orders)
            .FirstOrDefaultAsync(u => u.Id == userId);
    }
}
```

**–ü—Ä–∏–º–µ—Ä 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏**
```csharp
public class OrderServiceIntegrationTests : DatabaseTest
{
    private OrderService _orderService = null!;
    private IEmailService _emailService = null!;
    
    protected override async Task InitializeDbContext()
    {
        await base.InitializeDbContext();
        
        // Mock –≤–Ω–µ—à–Ω–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
        var emailServiceMock = new Mock<IEmailService>();
        emailServiceMock.Setup(x => x.SendOrderConfirmationAsync(It.IsAny<Order>()))
                       .Returns(Task.CompletedTask);
        _emailService = emailServiceMock.Object;
        
        _orderService = new OrderService(DbContext, _emailService);
    }
    
    [Fact]
    public async Task CreateOrder_ValidData_OrderCreatedAndEmailSent()
    {
        // Arrange
        var user = new User { Name = "Test User", Email = "test@example.com" };
        await DbContext.Users.AddAsync(user);
        await DbContext.SaveChangesAsync();
        
        var createOrderDto = new CreateOrderDto
        {
            UserId = user.Id,
            Items = new List<OrderItemDto>
            {
                new OrderItemDto { ProductName = "Laptop", Price = 999.99m, Quantity = 1 },
                new OrderItemDto { ProductName = "Mouse", Price = 29.99m, Quantity = 2 }
            }
        };
        
        // Act
        var order = await _orderService.CreateOrderAsync(createOrderDto);
        
        // Assert
        Assert.NotNull(order);
        Assert.Equal(user.Id, order.UserId);
        Assert.Equal(1059.97m, order.TotalAmount); // 999.99 + (29.99 * 2)
        Assert.Equal("Pending", order.Status);
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –∑–∞–∫–∞–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –ë–î
        var orderInDb = await DbContext.Orders
            .Include(o => o.User)
            .FirstOrDefaultAsync(o => o.Id == order.Id);
            
        Assert.NotNull(orderInDb);
        Assert.Equal(user.Email, orderInDb.User?.Email);
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—ã–∑–æ–≤ email —Å–µ—Ä–≤–∏—Å–∞
        Mock.Get(_emailService).Verify(
            x => x.SendOrderConfirmationAsync(It.IsAny<Order>()),
            Times.Once);
    }
    
    [Fact]
    public async Task CreateOrder_InvalidUser_ThrowsException()
    {
        // Arrange
        var createOrderDto = new CreateOrderDto
        {
            UserId = 999, // –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
            Items = new List<OrderItemDto>
            {
                new OrderItemDto { ProductName = "Product", Price = 100m, Quantity = 1 }
            }
        };
        
        // Act & Assert
        await Assert.ThrowsAsync<ArgumentException>(() =>
            _orderService.CreateOrderAsync(createOrderDto));
    }
    
    [Fact]
    public async Task ProcessOrder_OrderExists_UpdatesStatusAndSendsEmail()
    {
        // Arrange
        var user = new User { Name = "Test User", Email = "test@example.com" };
        var order = new Order { UserId = user.Id, TotalAmount = 100m, Status = "Pending" };
        
        await DbContext.Users.AddAsync(user);
        await DbContext.Orders.AddAsync(order);
        await DbContext.SaveChangesAsync();
        
        // Act
        await _orderService.ProcessOrderAsync(order.Id);
        
        // Assert
        var updatedOrder = await DbContext.Orders.FindAsync(order.Id);
        Assert.NotNull(updatedOrder);
        Assert.Equal("Processed", updatedOrder.Status);
        
        Mock.Get(_emailService).Verify(
            x => x.SendOrderConfirmationAsync(It.IsAny<Order>()),
            Times.Once);
    }
}

public class OrderService
{
    private readonly ApplicationDbContext _context;
    private readonly IEmailService _emailService;
    
    public OrderService(ApplicationDbContext context, IEmailService emailService)
    {
        _context = context;
        _emailService = emailService;
    }
    
    public async Task<Order> CreateOrderAsync(CreateOrderDto createOrderDto)
    {
        using var transaction = await _context.Database.BeginTransactionAsync();
        
        try
        {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            var user = await _context.Users.FindAsync(createOrderDto.UserId);
            if (user == null)
                throw new ArgumentException("User not found");
            
            // –°–æ–∑–¥–∞–µ–º –∑–∞–∫–∞–∑
            var order = new Order
            {
                UserId = createOrderDto.UserId,
                TotalAmount = createOrderDto.Items.Sum(i => i.Price * i.Quantity),
                Status = "Pending"
            };
            
            await _context.Orders.AddAsync(order);
            await _context.SaveChangesAsync();
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º email
            await _emailService.SendOrderConfirmationAsync(order);
            
            await transaction.CommitAsync();
            return order;
        }
        catch
        {
            await transaction.RollbackAsync();
            throw;
        }
    }
    
    public async Task ProcessOrderAsync(int orderId)
    {
        var order = await _context.Orders.FindAsync(orderId);
        if (order == null)
            throw new ArgumentException("Order not found");
            
        order.Status = "Processed";
        await _context.SaveChangesAsync();
        
        await _emailService.SendOrderConfirmationAsync(order);
    }
}

public interface IEmailService
{
    Task SendOrderConfirmationAsync(Order order);
}

public record CreateOrderDto
{
    public int UserId { get; init; }
    public List<OrderItemDto> Items { get; init; } = new();
}

public record OrderItemDto
{
    public string ProductName { get; init; } = string.Empty;
    public decimal Price { get; init; }
    public int Quantity { get; init; }
}
```

### 6. –ü–∞—Ç—Ç–µ—Ä–Ω—ã –∏ best practices

**1. –ö–ª–∞—Å—Å —Ñ–∏–∫—Å—Ç—É—Ä –¥–ª—è –æ–±—â–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤**
```csharp
public class DatabaseFixture : IAsyncLifetime
{
    private readonly PostgreSqlContainer _postgresContainer;
    private readonly Dictionary<string, string> _databaseNames = new();
    
    public async Task<ApplicationDbContext> CreateDbContextAsync()
    {
        var databaseName = $"test_db_{Guid.NewGuid():N}";
        _databaseNames[databaseName] = databaseName;
        
        var connectionString = $"{_postgresContainer.GetConnectionString()};Database={databaseName}";
        
        var options = new DbContextOptionsBuilder<ApplicationDbContext>()
            .UseNpgsql(connectionString)
            .Options;
            
        var context = new ApplicationDbContext(options);
        await context.Database.MigrateAsync();
        return context;
    }
    
    public async Task InitializeAsync()
    {
        await _postgresContainer.StartAsync();
    }
    
    public async Task DisposeAsync()
    {
        await _postgresContainer.DisposeAsync();
    }
}

public class DatabaseTest : IClassFixture<DatabaseFixture>
{
    protected readonly DatabaseFixture _fixture;
    protected ApplicationDbContext DbContext { get; private set; } = null!;
    
    public DatabaseTest(DatabaseFixture fixture)
    {
        _fixture = fixture;
    }
    
    public virtual async Task InitializeAsync()
    {
        DbContext = await _fixture.CreateDbContextAsync();
        await SeedTestDataAsync();
    }
    
    public virtual async Task DisposeAsync()
    {
        await DbContext.DisposeAsync();
    }
}
```

**2. –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ—á–∏—Å—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö**
```csharp
public class DataCleanupStrategies
{
    // –°–ø–æ—Å–æ–± 1: –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
    public async Task CleanupAllData(ApplicationDbContext context)
    {
        context.Orders.RemoveRange(context.Orders);
        context.Users.RemoveRange(context.Users);
        await context.SaveChangesAsync();
    }
    
    // –°–ø–æ—Å–æ–± 2: TRUNCATE —Ç–∞–±–ª–∏—Ü
    public async Task TruncateTables(ApplicationDbContext context)
    {
        var tables = new[] { "orders", "users" };
        
        foreach (var table in tables)
        {
            await context.Database.ExecuteSqlRawAsync($"TRUNCATE TABLE {table} CASCADE");
        }
    }
    
    // –°–ø–æ—Å–æ–± 3: –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Å –æ—Ç–∫–∞—Ç–æ–º
    public async Task TestWithTransaction()
    {
        using var transaction = await DbContext.Database.BeginTransactionAsync();
        
        try
        {
            // –í—ã–ø–æ–ª–Ω—è–µ–º —Ç–µ—Å—Ç
            await SomeTestOperation();
            
            // –ù–µ –∫–æ–º–º–∏—Ç–∏–º - –¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–∞—Ç—è—Ç—Å—è
        }
        finally
        {
            await transaction.RollbackAsync();
        }
    }
}
```

**3. Health check –∏ –æ–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ë–î**
```csharp
public static class ContainerExtensions
{
    public static async Task WaitForHealthyAsync(this IContainer container, 
        TimeSpan timeout)
    {
        var startTime = DateTime.UtcNow;
        
        while (DateTime.UtcNow - startTime < timeout)
        {
            try
            {
                var health = await container.GetHealthAsync();
                if (health == HealthStatus.Healthy)
                    return;
                    
                await Task.Delay(1000);
            }
            catch
            {
                await Task.Delay(1000);
            }
        }
        
        throw new TimeoutException("Container did not become healthy in time");
    }
}
```

### 7. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CI/CD

**GitHub Actions –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```yaml
name: Integration Tests

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  integration-tests:
    runs-on: ubuntu-latest
    services:
      docker:
        image: docker:24.0
        options: --privileged
        
    steps:
    - uses: actions/checkout@v4
    
    - name: Setup .NET
      uses: actions/setup-dotnet@v3
      with:
        dotnet-version: 8.0.x
        
    - name: Restore dependencies
      run: dotnet restore
      
    - name: Build
      run: dotnet build --no-restore --configuration Release
      
    - name: Run integration tests
      run: |
        docker --version
        dotnet test --no-build --configuration Release \
          --verbosity normal \
          --logger "trx;LogFileName=integration-test-results.trx" \
          --filter Category=Integration
          
    - name: Upload test results
      uses: actions/upload-artifact@v3
      with:
        name: integration-test-results
        path: **/*integration-test-results.trx
        
    - name: Upload coverage reports
      uses: codecov/codecov-action@v3
```

**–ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤:**
```csharp
[Trait("Category", "Integration")]
public class DatabaseIntegrationTests : DatabaseTest
{
    [Fact]
    [Trait("Category", "Integration")]
    public async Task ComplexIntegrationTest()
    {
        // –¢–µ—Å—Ç —Ç—Ä–µ–±—É—é—â–∏–π –≤–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
    }
    
    [Fact]
    [Trait("Category", "Unit")]
    public void PureUnitTest()
    {
        // –ë—ã—Å—Ç—Ä—ã–π unit —Ç–µ—Å—Ç
    }
}
```

### 8. –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

**–ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å—Ö–µ–º–∞ –ë–î:**
```csharp
public class MigrationTests : DatabaseTest
{
    [Fact]
    public async Task Database_CanApplyAllMigrations_Successfully()
    {
        // Arrange & Act
        // –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ InitializeAsync
        
        // Assert
        var appliedMigrations = await DbContext.Database.GetAppliedMigrationsAsync();
        var pendingMigrations = await DbContext.Database.GetPendingMigrationsAsync();
        
        Assert.NotEmpty(appliedMigrations);
        Assert.Empty(pendingMigrations);
    }
    
    [Fact]
    public async Task SeedData_AfterMigration_DataIsAccessible()
    {
        // Arrange
        var seeder = new DatabaseSeeder(DbContext);
        
        // Act
        await seeder.SeedAsync();
        
        // Assert
        var adminUser = await DbContext.Users
            .FirstOrDefaultAsync(u => u.Email == "admin@example.com");
            
        Assert.NotNull(adminUser);
    }
}
```

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```csharp
public class PerformanceTests : DatabaseTest
{
    [Fact]
    public async Task BulkInsert_PerformanceTest()
    {
        // Arrange
        var stopwatch = Stopwatch.StartNew();
        const int batchSize = 1000;
        
        // Act
        for (int i = 0; i < batchSize; i++)
        {
            var user = new User 
            { 
                Name = $"User {i}", 
                Email = $"user{i}@example.com" 
            };
            await DbContext.Users.AddAsync(user);
        }
        
        await DbContext.SaveChangesAsync();
        stopwatch.Stop();
        
        // Assert
        var actualCount = await DbContext.Users.CountAsync();
        Assert.Equal(batchSize, actualCount);
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –æ–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞ –ø—Ä–∏–µ–º–ª–µ–º–æ–µ –≤—Ä–µ–º—è
        Assert.True(stopwatch.ElapsedMilliseconds < 5000, 
            $"Bulk insert took {stopwatch.ElapsedMilliseconds}ms, expected < 5000ms");
    }
}
```

**–ö–∞—Å—Ç–æ–º–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ PostgreSQL:**
```csharp
public class CustomPostgresContainer : PostgreSqlContainer
{
    public CustomPostgresContainer() : base("postgres:15-alpine") { }
    
    protected override void Configure()
    {
        base.Configure();
        
        WithDatabase("custom_test_db")
          .WithUsername("custom_user")
          .WithPassword("custom_password")
          .WithCommand("--max-connections=100")
          .WithCommand("--shared-buffers=256MB")
          .WithEnvironment("POSTGRES_INITDB_ARGS", "--encoding=UTF8")
          .WithWaitStrategy(Wait.ForUnixContainer()
              .UntilPortIsAvailable(5432)
              .AddCustomWaitStrategy(new HealthCheckWaitStrategy()));
    }
}

public class HealthCheckWaitStrategy : IWaitUntil
{
    public async Task<bool> UntilAsync(IContainer container)
    {
        try
        {
            var execResult = await container.ExecAsync(new[] { "pg_isready", "-U", "postgres" });
            return execResult.ExitCode == 0;
        }
        catch
        {
            return false;
        }
    }
}
```

---

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### –ë–∞–∑–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã:
1. –í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É unit –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º?
2. –ö–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–∞–µ—Ç Testcontainers?
3. –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å PostgreSQL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è?
4. –ö–∞–∫–æ–≤ –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ —Ç–µ—Å—Ç–∞—Ö?
5. –ö–∞–∫ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –∏–∑–æ–ª—è—Ü–∏—é —Ç–µ—Å—Ç–æ–≤ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –ë–î?

### –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã:
6. –ö–∞–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Testcontainers —Å Entity Framework Core?
7. –ö–∞–∫–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ—á–∏—Å—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏ –≤—ã –∑–Ω–∞–µ—Ç–µ?
8. –ö–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å health check –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞?
9. –ö–∞–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è CI/CD –ø–∞–π–ø–ª–∞–π–Ω–∞?
10. –ö–∞–∫–∏–µ best practices –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤?

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è:
11. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Testcontainers –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏ EF Core
12. –ù–∞–ø–∏—à–∏—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç –¥–ª—è —Å–ª–æ–∂–Ω–æ–≥–æ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–∞ —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏
13. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –∫–∞—Å—Ç–æ–º–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –æ–∂–∏–¥–∞–Ω–∏—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ë–î
14. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∏–∫—Å—Ç—É—Ä—É –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏
15. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ CI/CD –ø–∞–π–ø–ª–∞–π–Ω —Å –∑–∞–ø—É—Å–∫–æ–º –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

Testcontainers –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–∞–¥–µ–∂–Ω—ã—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤, –±–ª–∏–∑–∫–∏—Ö –∫ production-—Å—Ä–µ–¥–µ. –í —Å–æ—á–µ—Ç–∞–Ω–∏–∏ —Å PostgreSQL –∏ Entity Framework Core —ç—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏, –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å –∏ –∏–∑–æ–ª—è—Ü–∏—é —Ç–µ—Å—Ç–æ–≤.

–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ–¥—Ö–æ–¥–∞:
- üéØ Production-like —Å—Ä–µ–¥–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- üîÑ –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- üßπ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞
- üöÄ –ë—ã—Å—Ç—Ä–∞—è feedback loop
- üí™ –í—ã—Å–æ–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ –∫–æ–¥–µ

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å Testcontainers —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –Ω–µ–æ—Ç—ä–µ–º–ª–µ–º–æ–π —á–∞—Å—Ç—å—é —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –∏ –∫–∞—á–µ—Å—Ç–≤–æ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è.