# Лекция. Основы Angular и структура проекта

**Цель лекции:** Познакомить студентов с основными концепциями фреймворка Angular, дать понимание для чего нужны его ключевые строительные блоки и научить ориентироваться в структуре стандартного проекта, созданного с помощью Angular CLI.

**Аудитория:** Студенты, знакомые с основами JavaScript/TypeScript, HTML и CSS.

---

### **План лекции:**

1.  **Введение в Angular**
    *   Что такое Angular?
    *   Angular vs AngularJS: в чем разница?
    *   Ключевые концепции: Компоненты, Модули, Сервисы, Директивы.
    *   Почему TypeScript?

2.  **Angular CLI – ваш лучший помощник**
    *   Что такое CLI и зачем он нужен?
    *   Установка и основные команды (`new`, `generate`, `serve`, `build`).

3.  **Детальный разбор структуры проекта Angular**
    *   **Корневая директория:** `package.json`, `angular.json`, `tsconfig.json`.
    *   **Папка `src/` – сердце приложения:**
        *   `index.html` – точка входа.
        *   `main.ts` – входная точка приложения.
        *   `app/` – корневой модуль и компонент.
    *   **Внутри папки `app/`:**
        *   `app.module.ts` (NgModule) – конфигуратор приложения.
        *   `app.component.ts` – логика корневого компонента.
        *   `app.component.html` – шаблон корневого компонента.
        *   `app.component.css` – стили корневого компонента.
    *   **Другие важные папки:** `assets/`, `environments/`.

4.  **Практическое создание компонента**
    *   Используем Angular CLI для генерации нового компонента.
    *   Разбираем, что создала CLI.
    *   Как добавить новый компонент в шаблон.

---

### **Детальное рассмотрение каждого пункта плана:**

#### **1. Введение в Angular**

**Что такое Angular?**
Angular – это не просто библиотека, а полноценный **фреймворк** для создания клиентских приложений (в основном, одностраничных - SPA). Его главная задача – структурировать код, сделать его масштабируемым, тестируемым и удобным для разработки больших проектов.

**Angular vs AngularJS: в чем разница?**
*   **AngularJS** (версия 1.x) – старый фреймворк, использует JavaScript и концепцию `scope`.
*   **Angular** (версии 2+) – это полная перезапись. Он использует TypeScript, компонентный подход и современные стандарты. Когда сегодня говорят "Angular", почти всегда имеют в виду версию 2+.

**Ключевые концепции:**
*   **Компоненты (Components):** Это строительные блоки интерфейса. Каждый компонент управляет небольшим участком экрана (view). Компонент состоит из TypeScript-класса (логика), HTML-шаблона (разметка) и CSS-стилей (оформление).
    *   *Пример:* Компонент `HeaderComponent`, компонент `ProductListComponent`, компонент `ButtonComponent`.

*   **Модули (NgModules):** Это механизм для организации приложения и объединения связанных функциональностей. Самое важное – `AppModule` (корневой модуль). Модуль объявляет, какие компоненты, директивы, сервисы принадлежат ему, а какие нужно импортировать из других модулей.
    *   *Пример:* `BrowserModule` (предоставляет функционал для работы в браузере), `FormsModule` (для работы с формами).

*   **Сервисы (Services):** Классы, которые отвечают за бизнес-логику, не связанную напрямую с отображением. Часто используются для работы с данными, HTTP-запросами, логированием.
    *   *Пример:* `UserService` – загружает список пользователей с сервера, `LoggerService` – логирует сообщения в консоль.

*   **Директивы (Directives):** Классы, которые добавляют поведение DOM-элементам. Бывают структурные (меняют структуру DOM, например, `*ngFor`) и атрибутные (меняют внешний вид или поведение элемента, например, `ngStyle`).

**Почему TypeScript?**
TypeScript – это надмножество JavaScript, которое добавляет строгую типизацию. Angular на нем построен, потому что типы помогают:
*   Находить ошибки на этапе разработки.
*   Делать код более понятным и самодокументированным.
*   Улучшать поддержку IDE (автодополнение, навигация по коду).

---

#### **2. Angular CLI – ваш лучший помощник**

**Что такое CLI?**
Angular CLI (Command Line Interface) – это официальный инструмент для автоматизации разработки. Он позволяет создавать проекты, добавлять файлы, выполнять тесты, собирать приложение для продакшена одной командой.

**Установка и основные команды:**
```bash
# Установка CLI глобально на машину
npm install -g @angular/cli

# Создание НОВОГО проекта с названием 'my-app'
ng new my-app

# Запуск development-сервера (обычно на http://localhost:4200)
ng serve

# Сборка проекта для продакшена в папку `dist/`
ng build

# Генерация нового компонента 'product-list'
ng generate component product-list
# Короткая запись:
ng g c product-list
```

---

#### **3. Детальный разбор структуры проекта Angular**

Давайте посмотрим на структуру проекта, созданного командой `ng new my-app`.

**Корневая директория:**
*   `package.json` – список всех зависимостей (библиотек) проекта и scripts для запуска задач (например, `npm start` запускает `ng serve`).
*   `angular.json` – **КОНФИГУРАЦИЯ ANGULAR CLI**. Здесь хранятся настройки сборки, пути к основным файлам, настройки тестирования и т.д. Не изменяйте этот файл без необходимости.
*   `tsconfig.json` – настройки компилятора TypeScript.

**Папка `src/` – сердце приложения:**
*   `index.html` – главная HTML-страница. Она очень простая. Ее основная задача – загрузить наш корневой компонент.
    ```html
    <!doctype html>
    <html lang="en">
    <head>
      <meta charset="utf-8">
      <title>MyApp</title>
    </head>
    <body>
      <!-- Корневой компонент! Сюда будет вставлен AppComponent -->
      <app-root></app-root>
    </body>
    </html>
    ```
*   `main.ts` – это входная точка приложения. Здесь мы "запускаем" наш корневой модуль (`AppModule`).
    ```typescript
    import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';
    import { AppModule } from './app/app.module';

    // Запускаем AppModule в браузерной платформе.
    platformBrowserDynamic().bootstrapModule(AppModule)
      .catch(err => console.error(err));
    ```

**Внутри папки `app/`:**
*   `app.module.ts` (NgModule) – это "мозговой центр". Он собирает все кусочки приложения вместе.
    ```typescript
    import { NgModule } from '@angular/core';
    import { BrowserModule } from '@angular/platform-browser';

    import { AppComponent } from './app.component';
    // Предположим, мы сгенерировали новый компонент
    import { ProductListComponent } from './product-list/product-list.component';

    @NgModule({
      // declarations - регистрируем все компоненты, директивы и пайпы, которые принадлежат ЭТОМУ модулю.
      declarations: [
        AppComponent,
        ProductListComponent // Добавляем наш новый компонент сюда!
      ],
      // imports - импортируем другие Angular-модули, функционал которых нам нужен.
      imports: [
        BrowserModule // обязательный модуль для работы в браузере
      ],
      // providers - регистрируем сервисы (глобальные провайдеры).
      providers: [],
      // bootstrap - указываем КОРНЕВОЙ компонент, с которого начнется загрузка приложения.
      bootstrap: [AppComponent]
    })
    export class AppModule { }
    ```
*   `app.component.ts` – корневой компонент. Его селектор (`app-root`) используется в `index.html`.
    ```typescript
    import { Component } from '@angular/core';

    @Component({
      // Селектор - это HTML-тег, по которому мы вставляем компонент.
      selector: 'app-root',
      // Ссылка на файл шаблона.
      templateUrl: './app.component.html',
      // Ссылка на файлы стилей (может быть массивом для нескольких файлов).
      styleUrls: ['./app.component.css']
    })
    export class AppComponent {
      // Свойства и методы класса - это "логика" компонента.
      title = 'my-app';

      onButtonClick() {
        this.title = 'Заголовок изменен!';
      }
    }
    ```
*   `app.component.html` – шаблон корневого компонента. Это обычный HTML, расширенный возможностями Angular (директивы, привязка данных).
    ```html
    <!-- Привязка свойства (interpolation) -->
    <h1>Добро пожаловать в {{ title }}!</h1>

    <!-- Привязка события -->
    <button (click)="onButtonClick()">Изменить заголовок</button>

    <!-- Использование другого компонента -->
    <app-product-list></app-product-list>
    ```
*   `app.component.css` – стили, применяемые ТОЛЬКО к этому компоненту (инкапсуляция).

**Другие важные папки:**
*   `assets/` – сюда складываются статические ресурсы: картинки, шрифты, JSON-файлы и т.д. Они будут скопированы при сборке "как есть".
*   `environments/` – содержит конфигурации для разных сред (development, production). Например, URL API для разработки и для продакшена могут быть разными.

---

#### **4. Практическое создание компонента**

Давайте создадим компонент для отображения списка товаров.

1.  **Генерация:**
    ```bash
    ng g c product-list
    ```

2.  **Что создала CLI?**
    *   `src/app/product-list/` – папка для компонента.
    *   `product-list.component.ts` – логика компонента.
    *   `product-list.component.html` – шаблон компонента.
    *   `product-list.component.css` – стили компонента.
    *   `product-list.component.spec.ts` – файл для unit-тестов.

    CLI **автоматически** добавила `ProductListComponent` в массив `declarations` в `app.module.ts`!

3.  **Редактируем `product-list.component.ts`:**
    ```typescript
    import { Component } from '@angular/core';

    @Component({
      selector: 'app-product-list',
      templateUrl: './product-list.component.html',
      styleUrls: ['./product-list.component.css']
    })
    export class ProductListComponent {
      // Добавим массив товаров
      products = [
        { name: 'Ноутбук', price: 1000 },
        { name: 'Мышь', price: 20 },
        { name: 'Клавиатура', price: 50 }
      ];
    }
    ```

4.  **Редактируем `product-list.component.html`:**
    ```html
    <h2>Список товаров</h2>
    <ul>
      <!-- Директива *ngFor для перебора массива -->
      <li *ngFor="let product of products">
        {{ product.name }} - {{ product.price }} $
      </li>
    </ul>
    ```

5.  **Добавляем компонент в шаблон корневого компонента (`app.component.html`):**
    ```html
    <h1>Магазин Электроники</h1>
    <!-- Наш новый компонент -->
    <app-product-list></app-product-list>
    ```

Теперь, запустив `ng serve`, вы увидите на странице как заголовок из `AppComponent`, так и список товаров из `ProductListComponent`.

---

### **Резюме**

*   **Angular** – это мощный фреймворк для построения SPA, использующий компонентный подход и TypeScript.
*   **Angular CLI** – незаменимый инструмент, который ускоряет разработку, следит за структурой и выполняет рутинные задачи.
*   **Структура проекта** логична и стандартизирована. Ключевые элементы:
    *   `src/index.html` – точка входа.
    *   `src/main.ts` – запускает приложение.
    *   `src/app/app.module.ts` – корневой модуль, который все связывает.
    *   `src/app/app.component` – корневой компонент.
*   **Компонент** – основная единица интерфейса, состоящая из TypeScript-класса, HTML-шаблона и CSS-стилей.
*   Для того чтобы использовать компонент, его нужно:
    1.  Создать (желательно через `ng g c`).
    2.  Добавить в `declarations` модуля (CLI делает это автоматически).
    3.  Вставить его селектор (`app-my-component`) в HTML-шаблон другого компонента.

---

### **Контрольные вопросы:**

1.  Объясните, чем Angular отличается от AngularJS.
2.  Что такое компонент в Angular и из каких частей он состоит?
3.  Какова роль NgModule (`app.module.ts`)? Что такое `declarations`, `imports` и `bootstrap`?
4.  Какую команду CLI нужно выполнить, чтобы создать новый компонент с именем `user-profile`?
5.  Опишите процесс, который происходит с момента ввода URL в браузерной строке до момента отображения Angular-приложения. (Подсказка: `index.html` -> `main.ts` -> `AppModule` -> `AppComponent`).
6.  Где в проекте следует размещать статические файлы, такие как изображения?
7.  Что делает директива `*ngFor`? Приведите пример ее использования.
8.  Как связать свойство класса компонента с его HTML-шаблоном? (Подсказка: интерполяция `{{ }}`).
9.  Почему Angular использует TypeScript вместо обычного JavaScript?
10. Что произойдет, если сгенерировать новый компонент, но не добавить его селектор в шаблон другого компонента? Будет ли он отображаться?