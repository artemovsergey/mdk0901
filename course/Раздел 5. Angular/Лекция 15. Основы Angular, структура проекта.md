# Лекция 15. Основы Angular и структура проекта

**Цель лекции:** познакомить студентов с основными концепциями фреймворка Angular, дать понимание для чего нужны его ключевые строительные блоки и научить ориентироваться в структуре стандартного проекта, созданного с помощью Angular CLI с использованием современных подходов (standalone components).

---

### **План лекции:**

1.  **Введение в Angular**
    *   Что такое Angular?
    *   Ключевые концепции: Компоненты, Сервисы, Директивы.
    *   Почему TypeScript?

2.  **Angular CLI – ваш лучший помощник**
    *   Что такое CLI и зачем он нужен?
    *   Установка и основные команды (`new`, `generate`, `serve`, `build`).

3.  **Детальный разбор структуры проекта Angular**
    *   **Корневая директория:** `package.json`, `angular.json`, `tsconfig.json`.
    *   **Папка `src/` – сердце приложения:**
        *   `index.html` – точка входа.
        *   `main.ts` – входная точка приложения.
        *   `app/` – корневой компонент и конфигурация.
    *   **Внутри папки `app/`:**
        *   `app.config.ts` – конфигурация приложения.
        *   `app.component.ts` – логика корневого компонента.
        *   `app.component.html` – шаблон корневого компонента.
        *   `app.component.css` – стили корневого компонента.
    *   **Другие важные папки:** `assets/`, `environments/`.

4.  **Практическое создание компонента**
    *   Используем Angular CLI для генерации нового standalone-компонента.
    *   Разбираем, что создала CLI.
    *   Как добавить новый компонент в шаблон.

---

#### **1. Введение в Angular**

**Что такое Angular?**
Angular – это современный **фреймворк** для создания клиентских приложений (в основном, одностраничных - SPA). Его главная задача – структурировать код, сделать его масштабируемым, тестируемым и удобным для разработки больших проектов.

**Ключевые концепции:**

*   **Компоненты (Components):** Это строительные блоки интерфейса. Каждый компонент управляет небольшим участком экрана (view). Компонент состоит из TypeScript-класса (логика), HTML-шаблона (разметка) и CSS-стилей (оформление). В современных версиях Angular используются **standalone components** (автономные компоненты), которые не требуют NgModules.
    *   *Пример:* Компонент `HeaderComponent`, компонент `ProductListComponent`, компонент `ButtonComponent`.

*   **Сервисы (Services):** Классы, которые отвечают за бизнес-логику, не связанную напрямую с отображением. Часто используются для работы с данными, HTTP-запросами, логированием.
    *   *Пример:* `UserService` – загружает список пользователей с сервера, `LoggerService` – логирует сообщения в консоль.

*   **Директивы (Directives):** Классы, которые добавляют поведение DOM-элементам. Бывают структурные (меняют структуру DOM, например, `*ngFor`) и атрибутные (меняют внешний вид или поведение элемента, например, `ngStyle`).

**Почему TypeScript?**
TypeScript – это надмножество JavaScript, которое добавляет строгую типизацию. Angular на нем построен, потому что типы помогают:
*   Находить ошибки на этапе разработки.
*   Делать код более понятным и самодокументированным.
*   Улучшать поддержку IDE (автодополнение, навигация по коду).

---

#### **2. Angular CLI – ваш лучший помощник**

**Что такое CLI?**
Angular CLI (Command Line Interface) – это официальный инструмент для автоматизации разработки. Он позволяет создавать проекты, добавлять файлы, выполнять тесты, собирать приложение для продакшена одной командой.

**Установка и основные команды:**
```bash
# Установка CLI глобально на машину
npm install -g @angular/cli

# Создание НОВОГО проекта с названием 'my-app'
ng new my-app

# Запуск development-сервера (обычно на http://localhost:4200)
ng serve

# Сборка проекта для продакшена в папку `dist/`
ng build

# Генерация нового standalone-компонента 'product-list'
ng generate component product-list --standalone
# Короткая запись:
ng g c product-list --standalone
```

---

#### **3. Детальный разбор структуры проекта Angular**

Давайте посмотрим на структуру проекта, созданного командой `ng new my-app` в современных версиях Angular.

**Корневая директория:**
*   `package.json` – список всех зависимостей (библиотек) проекта и scripts для запуска задач (например, `npm start` запускает `ng serve`).
*   `angular.json` – **КОНФИГУРАЦИЯ ANGULAR CLI**. Здесь хранятся настройки сборки, пути к основным файлам, настройки тестирования и т.д. Не изменяйте этот файл без необходимости.
*   `tsconfig.json` – настройки компилятора TypeScript.

**Папка `src/` – сердце приложения:**
*   `index.html` – главная HTML-страница. Она очень простая. Ее основная задача – загрузить наш корневой компонент.
    ```html
    <!doctype html>
    <html lang="en">
    <head>
      <meta charset="utf-8">
      <title>MyApp</title>
    </head>
    <body>
      <!-- Корневой компонент! Сюда будет вставлен AppComponent -->
      <app-root></app-root>
    </body>
    </html>
    ```
*   `main.ts` – это входная точка приложения. Здесь мы "запускаем" наше приложение, указывая корневой компонент.
    ```typescript
    import { bootstrapApplication } from '@angular/platform-browser';
    import { appConfig } from './app/app.config';
    import { AppComponent } from './app/app.component';

    // Запускаем приложение с корневым компонентом AppComponent и конфигурацией
    bootstrapApplication(AppComponent, appConfig)
      .catch((err) => console.error(err));
    ```

**Внутри папки `app/`:**
*   `app.config.ts` – конфигурация приложения, где регистрируются провайдеры сервисов и другие настройки.
    ```typescript
    import { ApplicationConfig } from '@angular/core';
    import { provideRouter } from '@angular/router';
    import { routes } from './app.routes';

    export const appConfig: ApplicationConfig = {
      providers: [
        provideRouter(routes)
        // Здесь можно добавить другие провайдеры (сервисы)
      ]
    };
    ```
*   `app.component.ts` – корневой компонент. Его селектор (`app-root`) используется в `index.html`. Это standalone-компонент.
    ```typescript
    import { Component } from '@angular/core';
    import { CommonModule } from '@angular/common';
    import { RouterOutlet } from '@angular/router';

    @Component({
      // Селектор - это HTML-тег, по которому мы вставляем компонент.
      selector: 'app-root',
      // standalone: true - указывает, что это автономный компонент
      standalone: true,
      // imports - импортируем необходимые директивы и другие компоненты
      imports: [CommonModule, RouterOutlet],
      // Ссылка на файл шаблона.
      templateUrl: './app.component.html',
      // Ссылка на файлы стилей (может быть массивом для нескольких файлов).
      styleUrls: ['./app.component.css']
    })
    export class AppComponent {
      // Свойства и методы класса - это "логика" компонента.
      title = 'my-app';

      onButtonClick() {
        this.title = 'Заголовок изменен!';
      }
    }
    ```
*   `app.component.html` – шаблон корневого компонента. Это обычный HTML, расширенный возможностями Angular (директивы, привязка данных).
    ```html
    <!-- Привязка свойства (interpolation) -->
    <h1>Добро пожаловать в {{ title }}!</h1>

    <!-- Привязка события -->
    <button (click)="onButtonClick()">Изменить заголовок</button>

    <!-- RouterOutlet - место для отображения маршрутизируемых компонентов -->
    <router-outlet></router-outlet>
    ```
*   `app.component.css` – стили, применяемые ТОЛЬКО к этому компоненту (инкапсуляция).

**Другие важные папки:**
*   `assets/` – сюда складываются статические ресурсы: картинки, шрифты, JSON-файлы и т.д. Они будут скопированы при сборке "как есть".
*   `environments/` – содержит конфигурации для разных сред (development, production). Например, URL API для разработки и для продакшена могут быть разными.

---

#### **4. Практическое создание компонента**

Давайте создадим standalone-компонент для отображения списка товаров.

1.  **Генерация:**
    ```bash
    ng g c product-list --standalone
    ```

2.  **Что создала CLI?**
    *   `src/app/product-list/` – папка для компонента.
    *   `product-list.component.ts` – логика компонента.
    *   `product-list.component.html` – шаблон компонента.
    *   `product-list.component.css` – стили компонента.
    *   `product-list.component.spec.ts` – файл для unit-тестов.

    **Важно:** Standalone-компоненты не требуют добавления в NgModules!

3.  **Редактируем `product-list.component.ts`:**
    ```typescript
    import { Component } from '@angular/core';
    import { CommonModule } from '@angular/common';

    @Component({
      selector: 'app-product-list',
      standalone: true,
      imports: [CommonModule], // Импортируем CommonModule для директив *ngFor, *ngIf и т.д.
      templateUrl: './product-list.component.html',
      styleUrls: ['./product-list.component.css']
    })
    export class ProductListComponent {
      // Добавим массив товаров
      products = [
        { name: 'Ноутбук', price: 1000 },
        { name: 'Мышь', price: 20 },
        { name: 'Клавиатура', price: 50 }
      ];
    }
    ```

4.  **Редактируем `product-list.component.html`:**
    ```html
    <h2>Список товаров</h2>
    <ul>
      <!-- Директива *ngFor для перебора массива -->
      <li *ngFor="let product of products">
        {{ product.name }} - {{ product.price }} $
      </li>
    </ul>
    ```

5.  **Добавляем компонент в шаблон корневого компонента (`app.component.html`):**
    ```html
    <h1>Магазин Электроники</h1>
    <!-- Наш новый компонент -->
    <app-product-list></app-product-list>
    ```

6.  **Импортируем компонент в корневой компонент (`app.component.ts`):**
    ```typescript
    import { Component } from '@angular/core';
    import { CommonModule } from '@angular/common';
    import { RouterOutlet } from '@angular/router';
    import { ProductListComponent } from './product-list/product-list.component';

    @Component({
      selector: 'app-root',
      standalone: true,
      imports: [CommonModule, RouterOutlet, ProductListComponent], // Добавляем импорт
      templateUrl: './app.component.html',
      styleUrls: ['./app.component.css']
    })
    export class AppComponent {
      title = 'my-app';
    }
    ```

Теперь, запустив `ng serve`, вы увидите на странице как заголовок из `AppComponent`, так и список товаров из `ProductListComponent`.

---

### **Резюме**

*   **Angular** – это мощный фреймворк для построения SPA, использующий компонентный подход и TypeScript.
*   **Современный Angular** использует standalone-компоненты, которые не требуют NgModules.
*   **Angular CLI** – незаменимый инструмент, который ускоряет разработку, следит за структурой и выполняет рутинные задачи.
*   **Структура проекта** логична и стандартизирована. Ключевые элементы:
    *   `src/index.html` – точка входа.
    *   `src/main.ts` – запускает приложение с помощью `bootstrapApplication`.
    *   `src/app/app.config.ts` – конфигурация приложения.
    *   `src/app/app.component` – корневой компонент.
*   **Standalone-компонент** – основная единица интерфейса, которая является автономной и импортирует необходимые зависимости самостоятельно.
*   Для того чтобы использовать standalone-компонент, нужно:
    1.  Создать (через `ng g c --standalone`).
    2.  Импортировать его в массив `imports` компонента, где он будет использоваться.
    3.  Вставить его селектор (`app-my-component`) в HTML-шаблон.

---

### **Контрольные вопросы:**

1.  Что такое компонент в Angular и из каких частей он состоит?
2.  Чем standalone-компоненты отличаются от компонентов, которые использовались в Angular с NgModules?
3.  Какую команду CLI нужно выполнить, чтобы создать новый standalone-компонент с именем `user-profile`?
4.  Опишите процесс, который происходит с момента ввода URL в браузерной строке до момента отображения Angular-приложения. (Подсказка: `index.html` -> `main.ts` -> `bootstrapApplication` -> `AppComponent`).
5.  Где в проекте следует размещать статические файлы, такие как изображения?
6.  Что делает директива `*ngFor`? Приведите пример ее использования.
7.  Как связать свойство класса компонента с его HTML-шаблоном? (Подсказка: интерполяция `{{ }}`).
8.  Почему Angular использует TypeScript вместо обычного JavaScript?
9.  Как использовать один компонент внутри другого в standalone-подходе?
10. Что такое `app.config.ts` и для чего он используется?