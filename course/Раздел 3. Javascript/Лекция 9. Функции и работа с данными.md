# Лекция 9. Функции и работа с данными в JavaScript

**Цель:** Научиться структурировать код с помощью функций и эффективно работать с коллекциями данных (массивами и объектами).

### **План лекции**

1.  **Функции: основы**
    *   Что такое функция и зачем она нужна?
    *   Function Declaration vs. Function Expression.
    *   Параметры и аргументы. Возврат значения (`return`).

2.  **Современный JavaScript: Стрелочные функции**
    *   Синтаксис стрелочных функций.
    *   Особенности и отличия от обычных функций.

3.  **Работа с данными: Массивы**
    *   Создание и основные операции.
    *   Базовые методы массивов: `push`, `pop`, `shift`, `unshift`, `forEach`.

4.  **Работа с данными: Объекты**
    *   Создание объектов и доступ к свойствам.
    *   Основные операции с объектами.

5.  **Практика: Функции для работы с массивами и объектами**
    *   Примеры обработки данных с помощью функций.

---

### **Содержание лекции (Детализация)**

#### **1. Функции: основы**

**Что такое функция?**

Функция — это независимая часть кода, предназначенная для выполнения конкретной задачи. Её можно сравнить с мини-программой внутри основной программы.

**Зачем нужны функции?**
*   **Повторное использование кода:** Написали один раз — используете многократно.
*   **Структурирование:** Разбиваем сложную программу на простые части.
*   **Изоляция:** Переменные внутри функции не влияют на внешний код (если не используются глобальные переменные).
*   **Удобство чтения:** Именованные функции делают код понятнее.

**Function Declaration (Объявление функции)**

Функция объявляется с помощью ключевого слова `function`.

```javascript
// Объявление функции
function greetUser(userName) {
  return `Привет, ${userName}!`;
}

// Вызов функции
let message = greetUser("Анна"); // Передаем аргумент "Анна"
console.log(message); // "Привет, Анна!"
```

**Function Expression (Функциональное выражение)**

Функция создается внутри выражения (например, присваивается переменной).

```javascript
// Функциональное выражение
const calculateSum = function(a, b) {
  return a + b;
};

console.log(calculateSum(5, 3)); // 8
```

**Параметры и аргументы. Возврат значения.**

*   **Параметры** — это переменные, указанные в объявлении функции (`userName`, `a`, `b`).
*   **Аргументы** — это конкретные значения, которые передаются в функцию при вызове (`"Анна"`, `5`, `3`).
*   **`return`** — ключевое слово, которое возвращает результат работы функции. Если `return` отсутствует, функция возвращает `undefined`.

```javascript
function checkAge(age) {
  if (age >= 18) {
    return "Доступ разрешен";
  } else {
    return "Доступ запрещен";
  }
  // Код после return не выполнится
  console.log("Эта строка никогда не выполнится");
}

let result = checkAge(20);
console.log(result); // "Доступ разрешен"
```

#### **2. Современный JavaScript: Стрелочные функции**

Стрелочные функции (Arrow Functions) — это более краткий синтаксис для создания функций, представленный в ES6.

**Синтаксис:**

```javascript
// Базовый синтаксис: (параметры) => { тело }
const multiply = (a, b) => {
  return a * b;
};

// Если тело функции состоит из одного выражения, можно убрать {} и return
const multiplyShort = (a, b) => a * b;

// Если параметр один, можно убрать круглые скобки
const square = x => x * x;

// Функция без параметров
const sayHello = () => console.log("Hello!");

console.log(multiply(2, 3)); // 6
console.log(square(5)); // 25
sayHello(); // "Hello!"
```

**Особенности стрелочных функций:**
*   У них нет своей связки с `this` (это мы подробнее изучим в теме "Контекст").
*   Их нельзя использовать как конструктор (с `new`).
*   Более лаконичный синтаксис.

#### **3. Работа с данными: Массивы**

**Массив** — это упорядоченная коллекция элементов, пронумерованных от 0.

**Создание и базовые операции:**

```javascript
// Создание массива
let fruits = ["Яблоко", "Апельсин", "Груша"];

// Получение элемента по индексу
console.log(fruits[0]); // "Яблоко"
console.log(fruits[2]); // "Груша"

// Длина массива
console.log(fruits.length); // 3

// Перебор массива (классический for)
for (let i = 0; i < fruits.length; i++) {
  console.log(fruits[i]);
}
```

**Базовые методы массивов:**

*   **`push/pop`** — работают с **концом** массива.
*   **`shift/unshift`** — работают с **началом** массива.

```javascript
let cars = ["BMW", "Audi"];

// push - добавить элемент(ы) в конец
cars.push("Mercedes");
console.log(cars); // ['BMW', 'Audi', 'Mercedes']

// pop - удалить последний элемент (и вернуть его)
let lastCar = cars.pop();
console.log(lastCar); // "Mercedes"
console.log(cars); // ['BMW', 'Audi']

// unshift - добавить элемент(ы) в начало
cars.unshift("Toyota");
console.log(cars); // ['Toyota', 'BMW', 'Audi']

// shift - удалить первый элемент (и вернуть его)
let firstCar = cars.shift();
console.log(firstCar); // "Toyota"
console.log(cars); // ['BMW', 'Audi']
```

**Метод `forEach`:**

Современный и удобный способ перебора элементов массива.

```javascript
let numbers = [1, 2, 3, 4, 5];

// numbers.forEach(function(элемент, индекс, массив) { ... })
numbers.forEach(function(number, index) {
  console.log(`Элемент с индексом ${index}: ${number}`);
});
// Выведет:
// Элемент с индексом 0: 1
// Элемент с индексом 1: 2
// ... и т.д.

// То же самое со стрелочной функцией:
numbers.forEach((number, index) => console.log(`Элемент ${index}: ${number}`));
```

#### **4. Работа с данными: Объекты**

**Объект** — это коллекция пар **ключ: значение**, где ключ — это строка (называется "свойство"), а значение может быть любым типом данных.

**Создание объектов и доступ к свойствам:**

```javascript
// Создание объекта
let user = {
  name: "Иван", // свойство "name" имеет значение "Иван"
  age: 30,
  isAdmin: true,
  "likes cats": true // имя свойства из нескольких слов должно быть в кавычках
};

// Доступ к свойствам через точку
console.log(user.name); // "Иван"
console.log(user.age); // 30

// Доступ к свойствам через квадратные скобки
console.log(user["isAdmin"]); // true
console.log(user["likes cats"]); // true (обязательно через квадратные скобки)

// Добавление нового свойства
user.city = "Москва";

// Изменение свойства
user.age = 31;

// Удаление свойства
delete user.isAdmin;
```

#### **5. Практика: Функции для работы с массивами и объектами**

**Пример 1: Функция для поиска в массиве**

```javascript
function findProduct(products, productName) {
  for (let product of products) { // Цикл for...of для перебора значений массива
    if (product === productName) {
      return `Товар "${productName}" найден!`;
    }
  }
  return `Товар "${productName}" не найден.`;
}

let productList = ["Ноутбук", "Мышь", "Клавиатура"];
console.log(findProduct(productList, "Мышь")); // Товар "Мышь" найден!
console.log(findProduct(productList, "Монитор")); // Товар "Монитор" не найден.
```

**Пример 2: Функция для работы с объектом пользователя**

```javascript
// Функция создает приветственное сообщение на основе данных объекта
const createGreeting = (person) => {
  return `Здравствуйте, ${person.name}! Вам ${person.age} лет.`;
};

let person1 = {
  name: "Светлана",
  age: 25
};

let greetingMessage = createGreeting(person1);
console.log(greetingMessage); // "Здравствуйте, Светлана! Вам 25 лет."
```

**Пример 3: Обработка массива объектов (очень распространенная задача!)**

```javascript
let students = [
  { name: "Алексей", grade: 5 },
  { name: "Мария", grade: 4 },
  { name: "Сергей", grade: 3 }
];

// Функция для получения списка отличников
function getTopStudents(studentsArray) {
  let topStudents = [];
  studentsArray.forEach(student => {
    if (student.grade === 5) {
      topStudents.push(student.name);
    }
  });
  return topStudents;
}

console.log(getTopStudents(students)); // ['Алексей']
```

---

### **Резюме**

Сегодня мы изучили два критически важных кита JavaScript:
*   **Функции** позволяют структурировать код, делая его reusable (переиспользуемым) и читаемым. Мы рассмотрели три способа их создания: Function Declaration, Function Expression и современные Arrow Functions.
*   **Структуры данных** (Массивы и Объекты) позволяют организовывать и хранить коллекции данных. Массивы — для упорядоченных списков, Объекты — для структурированных данных с именованными свойствами.

**Ключевой вывод:** Умение создавать функции и эффективно работать с массивами и объектами — это 90% работы фронтенд-разработчика. Эти инструменты позволяют обрабатывать данные от пользователя, взаимодействовать с сервером и динамически обновлять интерфейс.

---

### **Контрольные вопросы**

1.  В чем разница между Function Declaration и Function Expression? Когда предпочтительнее использовать каждую из них?
2.  Перепишите следующую функцию как стрелочную:
    ```javascript
    function doubleNumber(num) {
      return num * 2;
    }
    ```
3.  Создайте массив `books` с тремя книгами. Напишите код, который добавляет книгу в начало массива и удаляет последнюю.
4.  Дан объект `let car = { brand: "Toyota", model: "Camry", year: 2020 };`. Как получить значение свойства `model` двумя разными способами?
5.  Напишите функцию `getUserInfo(user)`, которая принимает объект пользователя (со свойствами `name`, `email`) и возвращает строку: "Пользователь: [name], Email: [email]".
6.  Дан массив чисел `let numbers = [10, 20, 30, 40];`. Используя метод `forEach`, выведите каждый элемент в консоль с сообщением "Число: [число]".
7.  **Сценарий:** У вас есть массив объектов-товаров `products` (каждый товар имеет `id`, `name`, `price`). Как бы вы написали функцию `findProductById(products, id)`, которая находит товар по его `id` и возвращает его?